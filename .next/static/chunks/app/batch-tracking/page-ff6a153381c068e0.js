(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[997],{858:(e,s,t)=>{Promise.resolve().then(t.bind(t,39898))},6143:(e,s,t)=>{"use strict";t.d(s,{k:()=>N});var a=t(95155),r=t(12115),l=t(3468),n=t(97602),c="Progress",[i,d]=(0,l.A)(c),[o,u]=i(c),h=r.forwardRef((e,s)=>{var t,r,l,c;let{__scopeProgress:i,value:d=null,max:u,getValueLabel:h=p,...m}=e;(u||0===u)&&!v(u)&&console.error((t="".concat(u),r="Progress","Invalid prop `max` of value `".concat(t,"` supplied to `").concat(r,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let x=v(u)?u:100;null===d||b(d,x)||console.error((l="".concat(d),c="Progress","Invalid prop `value` of value `".concat(l,"` supplied to `").concat(c,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let f=b(d,x)?d:null,N=g(f)?h(f,x):void 0;return(0,a.jsx)(o,{scope:i,value:f,max:x,children:(0,a.jsx)(n.sG.div,{"aria-valuemax":x,"aria-valuemin":0,"aria-valuenow":g(f)?f:void 0,"aria-valuetext":N,role:"progressbar","data-state":j(f,x),"data-value":null!=f?f:void 0,"data-max":x,...m,ref:s})})});h.displayName=c;var m="ProgressIndicator",x=r.forwardRef((e,s)=>{var t;let{__scopeProgress:r,...l}=e,c=u(m,r);return(0,a.jsx)(n.sG.div,{"data-state":j(c.value,c.max),"data-value":null!=(t=c.value)?t:void 0,"data-max":c.max,...l,ref:s})});function p(e,s){return"".concat(Math.round(e/s*100),"%")}function j(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function g(e){return"number"==typeof e}function v(e){return g(e)&&!isNaN(e)&&e>0}function b(e,s){return g(e)&&!isNaN(e)&&e<=s&&e>=0}x.displayName=m;var f=t(64269);let N=r.forwardRef((e,s)=>{let{className:t,value:r,...l}=e;return(0,a.jsx)(h,{ref:s,className:(0,f.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...l,children:(0,a.jsx)(x,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});N.displayName=h.displayName},39898:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>C});var a=t(95155),r=t(12115),l=t(10708),n=t(94205),c=t(86948),i=t(87270),d=t(11647),o=t(3998),u=t(65142),h=t(6143),m=t(22452),x=t(90109),p=t(73180),j=t(26615),g=t(88964),v=t(13630),b=t(51834),f=t(11186),N=t(76444),y=t(15894);function C(){let[e,s]=(0,r.useState)({}),[t,C]=(0,r.useState)(""),[w,I]=(0,r.useState)(null),[P,A]=(0,r.useState)({batchId:"",product:"",startDate:"",completion:0,status:"In Progress"}),[O,D]=(0,r.useState)(null),[S,k]=(0,r.useState)(!1),[E,R]=(0,r.useState)(!1),[B,F]=(0,r.useState)({batchId:"",product:"",startDate:"",completion:0,status:"In Progress"});(0,r.useEffect)(()=>{let e=(0,l.KR)(n.OO,"batches"),t=(0,l.Zy)(e,e=>{let t=e.val();t?s(t):s({}),R(!1)},e=>{console.error("Error fetching batches:",e),(0,y.oR)({title:"Error",description:"Failed to fetch batch data",variant:"destructive"}),R(!1)});return()=>t()},[]);let H=async()=>{if(!B.batchId||!B.product||!B.startDate)return void(0,y.oR)({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});R(!0);try{let e=(0,l.KR)(n.OO,"batches"),s=(0,l.VC)(e);await (0,l.hZ)(s,{...B,id:s.key}),(0,y.oR)({title:"Success",description:"Batch created successfully"}),F({batchId:"",product:"",startDate:"",completion:0,status:"In Progress"}),k(!1)}catch(e){console.error("Error adding batch:",e),(0,y.oR)({title:"Error",description:"Failed to create batch",variant:"destructive"})}finally{R(!1)}},J=async e=>{R(!0);try{let s=(0,l.KR)(n.OO,"batches/".concat(e));await (0,l.yo)(s,P),(0,y.oR)({title:"Success",description:"Batch updated successfully"}),I(null),A({batchId:"",product:"",startDate:"",completion:0,status:"In Progress"}),D(null)}catch(e){console.error("Error updating batch:",e),(0,y.oR)({title:"Error",description:"Failed to update batch",variant:"destructive"})}finally{R(!1)}},L=()=>{I(null),A({batchId:"",product:"",startDate:"",completion:0,status:"In Progress"}),D(null)},$=async(e,s)=>{if(confirm("Are you sure you want to delete batch ".concat(s,"?"))){R(!0);try{let s=(0,l.KR)(n.OO,"batches/".concat(e));await (0,l.TF)(s),(0,y.oR)({title:"Success",description:"Batch deleted successfully"})}catch(e){console.error("Error deleting batch:",e),(0,y.oR)({title:"Error",description:"Failed to delete batch",variant:"destructive"})}finally{R(!1)}}},q=Object.entries(e).filter(e=>{var s,a,r;let[l,n]=e;return(null==(s=n.batchId)?void 0:s.toLowerCase().includes(t.toLowerCase()))||(null==(a=n.product)?void 0:a.toLowerCase().includes(t.toLowerCase()))||(null==(r=n.status)?void 0:r.toLowerCase().includes(t.toLowerCase()))}),z=!!O&&JSON.stringify(P)!==JSON.stringify(O);return(0,a.jsx)("div",{className:"p-6 space-y-6",children:(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.ZB,{className:"text-2xl font-bold",children:"Batch Tracking"}),(0,a.jsx)(c.BT,{className:"text-base",children:"Monitor production lots from start to finish."})]}),(0,a.jsxs)(b.lG,{open:S,onOpenChange:k,children:[(0,a.jsx)(b.zM,{asChild:!0,children:(0,a.jsxs)(o.$,{size:"lg",className:"gap-2",children:[(0,a.jsx)(m.A,{className:"h-5 w-5"}),"New Batch"]})}),(0,a.jsxs)(b.Cf,{className:"sm:max-w-[500px]",children:[(0,a.jsxs)(b.c7,{children:[(0,a.jsx)(b.L3,{children:"Create New Batch"}),(0,a.jsx)(b.rr,{children:"Add a new batch to track its progress through production."})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsxs)(N.J,{htmlFor:"batchId",children:["Batch ID ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(u.p,{id:"batchId",value:B.batchId,onChange:e=>F({...B,batchId:e.target.value}),placeholder:"e.g., B-XXX",required:!0})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsxs)(N.J,{htmlFor:"product",children:["Product Name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(u.p,{id:"product",value:B.product,onChange:e=>F({...B,product:e.target.value}),placeholder:"e.g., Pharma-C 500mg Tablets",required:!0})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsxs)(N.J,{htmlFor:"startDate",children:["Start Date ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(u.p,{id:"startDate",type:"date",value:B.startDate,onChange:e=>F({...B,startDate:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(N.J,{htmlFor:"completion",children:"Completion (%)"}),(0,a.jsx)(u.p,{id:"completion",type:"number",min:"0",max:"100",value:B.completion,onChange:e=>F({...B,completion:parseInt(e.target.value)||0})})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(N.J,{htmlFor:"status",children:"Status"}),(0,a.jsxs)(f.l6,{value:B.status,onValueChange:e=>F({...B,status:e}),children:[(0,a.jsx)(f.bq,{children:(0,a.jsx)(f.yv,{})}),(0,a.jsxs)(f.gC,{children:[(0,a.jsx)(f.eb,{value:"In Progress",children:"In Progress"}),(0,a.jsx)(f.eb,{value:"Completed",children:"Completed"}),(0,a.jsx)(f.eb,{value:"QA Pending",children:"QA Pending"}),(0,a.jsx)(f.eb,{value:"On Hold",children:"On Hold"})]})]})]})]}),(0,a.jsxs)(b.Es,{children:[(0,a.jsx)(o.$,{variant:"outline",onClick:()=>k(!1),disabled:E,children:"Cancel"}),(0,a.jsx)(o.$,{onClick:H,disabled:E,children:E?"Creating...":"Create Batch"})]})]})]})]})}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(u.p,{placeholder:"Search by Batch ID, Product, or Status...",className:"pl-10",value:t,onChange:e=>C(e.target.value)})]})}),(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)(i.XI,{children:[(0,a.jsx)(i.A0,{children:(0,a.jsxs)(i.Hj,{className:"bg-muted/50",children:[(0,a.jsx)(i.nd,{className:"font-semibold",children:"Batch ID"}),(0,a.jsx)(i.nd,{className:"font-semibold",children:"Product Name"}),(0,a.jsx)(i.nd,{className:"font-semibold",children:"Start Date"}),(0,a.jsx)(i.nd,{className:"font-semibold",children:"Progress"}),(0,a.jsx)(i.nd,{className:"font-semibold",children:"Status"}),(0,a.jsx)(i.nd,{className:"text-right font-semibold",children:"Actions"})]})}),(0,a.jsx)(i.BF,{children:0===q.length?(0,a.jsx)(i.Hj,{children:(0,a.jsx)(i.nA,{colSpan:6,className:"text-center h-32",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center text-muted-foreground",children:[(0,a.jsx)("p",{className:"text-lg font-medium",children:"No batches found"}),(0,a.jsx)("p",{className:"text-sm",children:t?"Try adjusting your search criteria":'Click "New Batch" to get started'})]})})}):q.map(e=>{let[s,t]=e;return(0,a.jsxs)(i.Hj,{className:w===s?"bg-blue-50 dark:bg-blue-950/20":"",children:[(0,a.jsx)(i.nA,{className:"font-medium",children:w===s?(0,a.jsx)(u.p,{value:P.batchId,onChange:e=>A({...P,batchId:e.target.value}),className:"w-32",disabled:E}):(0,a.jsx)("span",{className:"font-semibold",children:t.batchId})}),(0,a.jsx)(i.nA,{children:w===s?(0,a.jsx)(u.p,{value:P.product,onChange:e=>A({...P,product:e.target.value}),className:"min-w-[200px]",disabled:E}):t.product}),(0,a.jsx)(i.nA,{children:w===s?(0,a.jsx)(u.p,{type:"date",value:P.startDate,onChange:e=>A({...P,startDate:e.target.value}),disabled:E}):t.startDate}),(0,a.jsx)(i.nA,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(h.k,{value:w===s?P.completion:t.completion,className:"w-[80px]"}),w===s?(0,a.jsx)(u.p,{type:"number",min:"0",max:"100",value:P.completion,onChange:e=>A({...P,completion:parseInt(e.target.value)||0}),className:"w-20",disabled:E}):(0,a.jsxs)("span",{className:"text-sm font-medium w-12",children:[t.completion,"%"]})]})}),(0,a.jsx)(i.nA,{children:w===s?(0,a.jsxs)(f.l6,{value:P.status,onValueChange:e=>A({...P,status:e}),disabled:E,children:[(0,a.jsx)(f.bq,{className:"w-[150px]",children:(0,a.jsx)(f.yv,{})}),(0,a.jsxs)(f.gC,{children:[(0,a.jsx)(f.eb,{value:"In Progress",children:"In Progress"}),(0,a.jsx)(f.eb,{value:"Completed",children:"Completed"}),(0,a.jsx)(f.eb,{value:"QA Pending",children:"QA Pending"}),(0,a.jsx)(f.eb,{value:"On Hold",children:"On Hold"})]})]}):(0,a.jsx)(d.E,{variant:(e=>{switch(e){case"Completed":return"default";case"In Progress":return"secondary";case"QA Pending":default:return"outline";case"On Hold":return"destructive"}})(t.status),className:(e=>{switch(e){case"Completed":return"bg-green-100 text-green-800";case"In Progress":return"bg-blue-100 text-blue-800";case"QA Pending":return"bg-yellow-100 text-yellow-800";case"On Hold":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(t.status),children:t.status})}),(0,a.jsx)(i.nA,{className:"text-right",children:(0,a.jsx)("div",{className:"flex justify-end gap-2",children:w===s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.$,{size:"sm",variant:"default",onClick:()=>J(s),disabled:E||!z,className:"gap-1",children:[(0,a.jsx)(p.A,{className:"h-4 w-4"}),"Save"]}),(0,a.jsxs)(o.$,{size:"sm",variant:"outline",onClick:L,disabled:E,className:"gap-1",children:[(0,a.jsx)(j.A,{className:"h-4 w-4"}),"Cancel"]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.$,{size:"sm",variant:"outline",onClick:()=>((e,s)=>{I(e);let t={batchId:s.batchId,product:s.product,startDate:s.startDate,completion:s.completion,status:s.status};A(t),D({...t})})(s,t),disabled:E||null!==w,className:"gap-1",children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),"Edit"]}),(0,a.jsxs)(o.$,{size:"sm",variant:"destructive",onClick:()=>$(s,t.batchId),disabled:E||null!==w,className:"gap-1",children:[(0,a.jsx)(v.A,{className:"h-4 w-4"}),"Delete"]})]})})})]},s)})})]})}),q.length>0&&(0,a.jsxs)("div",{className:"mt-6 flex justify-between items-center text-sm text-muted-foreground",children:[(0,a.jsxs)("p",{children:["Showing ",(0,a.jsx)("span",{className:"font-medium text-foreground",children:q.length})," of"," ",(0,a.jsx)("span",{className:"font-medium text-foreground",children:Object.keys(e).length})," batches"]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),(0,a.jsxs)("span",{children:["In Progress: ",Object.values(e).filter(e=>"In Progress"===e.status).length]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,a.jsxs)("span",{children:["Completed: ",Object.values(e).filter(e=>"Completed"===e.status).length]})]})]})]})]})]})})}}},e=>{e.O(0,[138,507,299,253,753,400,116,751,441,255,358],()=>e(e.s=858)),_N_E=e.O()}]);