(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[424],{55295:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>b});var l=s(95155),t=s(12115),r=s(10708),n=s(94205),d=s(86948),i=s(87270),c=s(11647),o=s(3998),u=s(65142),h=s(22452),m=s(90109),x=s(73180),j=s(26615),v=s(88964),p=s(13630),f=s(15894),N=s(51834),g=s(76444),C=s(11186);let y=["Active","In Development","Superseded","Retired"];function b(){let[e,a]=(0,t.useState)({}),[s,b]=(0,t.useState)(""),[w,F]=(0,t.useState)(null),[A,S]=(0,t.useState)({}),[D,I]=(0,t.useState)(null),[k,O]=(0,t.useState)(!1),[R,E]=(0,t.useState)(!1),[J,L]=(0,t.useState)({formulaId:"",productName:"",version:1,status:"Active",createdDate:""});(0,t.useEffect)(()=>{let e=(0,r.KR)(n.OO,"formulas"),s=(0,r.Zy)(e,e=>{a(e.val()||{}),E(!1)},()=>E(!1));return()=>s()},[]);let $=async()=>{if(!J.formulaId||!J.productName||!J.createdDate)return void(0,f.oR)({title:"Validation Error",description:"Please fill all required fields",variant:"destructive"});E(!0);try{let e=(0,r.KR)(n.OO,"formulas"),a=(0,r.VC)(e);await (0,r.hZ)(a,{...J,id:a.key}),L({formulaId:"",productName:"",version:1,status:"Active",createdDate:""}),O(!1),(0,f.oR)({title:"Success",description:"Formula added"})}catch(e){(0,f.oR)({title:"Error",description:"Failed to add formula",variant:"destructive"})}finally{E(!1)}},V=async e=>{E(!0);try{let a=(0,r.KR)(n.OO,"formulas/".concat(e));await (0,r.yo)(a,A),(0,f.oR)({title:"Success",description:"Formula updated"}),F(null),S({}),I(null)}catch(e){(0,f.oR)({title:"Error",description:"Update failed",variant:"destructive"})}finally{E(!1)}},_=()=>{F(null),S({}),I(null)},z=async(e,a)=>{if(confirm("Delete formula ".concat(a,"?"))){E(!0);try{let a=(0,r.KR)(n.OO,"formulas/".concat(e));await (0,r.TF)(a),(0,f.oR)({title:"Success",description:"Formula deleted"})}catch(e){(0,f.oR)({title:"Error",description:"Delete failed",variant:"destructive"})}finally{E(!1)}}},K=!!D&&JSON.stringify(A)!==JSON.stringify(D),P=Object.entries(e).filter(e=>{var a,l,t;let[r,n]=e;return(null==(a=n.formulaId)?void 0:a.toLowerCase().includes(s.toLowerCase()))||(null==(l=n.productName)?void 0:l.toLowerCase().includes(s.toLowerCase()))||(null==(t=n.status)?void 0:t.toLowerCase().includes(s.toLowerCase()))});return(0,l.jsx)("div",{className:"p-6",children:(0,l.jsxs)(d.Zp,{children:[(0,l.jsx)(d.aR,{children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(d.ZB,{children:"Formulation Management"}),(0,l.jsx)(d.BT,{children:"Manage and track all drug formulas."})]}),(0,l.jsxs)(N.lG,{open:k,onOpenChange:O,children:[(0,l.jsx)(N.zM,{asChild:!0,children:(0,l.jsxs)(o.$,{className:"gap-2",children:[(0,l.jsx)(h.A,{className:"h-5 w-5"}),"New Formula"]})}),(0,l.jsxs)(N.Cf,{children:[(0,l.jsxs)(N.c7,{children:[(0,l.jsx)(N.L3,{children:"Add New Formula"}),(0,l.jsx)(N.rr,{children:"Enter details to add a new formula."})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(g.J,{htmlFor:"formulaId",children:"Formula ID"}),(0,l.jsx)(u.p,{id:"formulaId",type:"text",value:J.formulaId,onChange:e=>L({...J,formulaId:e.target.value})}),(0,l.jsx)(g.J,{htmlFor:"productName",children:"Product Name"}),(0,l.jsx)(u.p,{id:"productName",type:"text",value:J.productName,onChange:e=>L({...J,productName:e.target.value})}),(0,l.jsx)(g.J,{htmlFor:"version",children:"Version"}),(0,l.jsx)(u.p,{id:"version",type:"number",min:"0",step:"0.1",value:J.version,onChange:e=>L({...J,version:parseFloat(e.target.value)||1})}),(0,l.jsx)(g.J,{children:"Status"}),(0,l.jsxs)(C.l6,{value:J.status,onValueChange:e=>L({...J,status:e}),children:[(0,l.jsx)(C.bq,{children:(0,l.jsx)(C.yv,{})}),(0,l.jsx)(C.gC,{children:y.map(e=>(0,l.jsx)(C.eb,{value:e,children:e},e))})]}),(0,l.jsx)(g.J,{htmlFor:"createdDate",children:"Created Date"}),(0,l.jsx)(u.p,{id:"createdDate",type:"date",value:J.createdDate,onChange:e=>L({...J,createdDate:e.target.value})})]}),(0,l.jsxs)(N.Es,{children:[(0,l.jsx)(o.$,{variant:"outline",onClick:()=>O(!1),disabled:R,children:"Cancel"}),(0,l.jsx)(o.$,{onClick:$,disabled:R,children:"Add Formula"})]})]})]})]})}),(0,l.jsxs)(d.Wu,{children:[(0,l.jsxs)("div",{className:"relative mb-4",children:[(0,l.jsx)(m.A,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,l.jsx)(u.p,{placeholder:"Search formulas",className:"pl-10",value:s,onChange:e=>b(e.target.value),disabled:R})]}),(0,l.jsx)("div",{className:"rounded-md border",children:(0,l.jsxs)(i.XI,{children:[(0,l.jsx)(i.A0,{children:(0,l.jsxs)(i.Hj,{children:[(0,l.jsx)(i.nd,{children:"Formula ID"}),(0,l.jsx)(i.nd,{children:"Product Name"}),(0,l.jsx)(i.nd,{children:"Version"}),(0,l.jsx)(i.nd,{children:"Created Date"}),(0,l.jsx)(i.nd,{children:"Status"}),(0,l.jsx)(i.nd,{className:"text-right",children:"Actions"})]})}),(0,l.jsx)(i.BF,{children:0===P.length?(0,l.jsx)(i.Hj,{children:(0,l.jsx)(i.nA,{colSpan:6,className:"text-center h-32",children:'No formulas found. Click "New Formula" to add.'})}):P.map(e=>{let[a,s]=e;return(0,l.jsxs)(i.Hj,{className:w===a?"bg-blue-50 dark:bg-blue-950/20":"",children:[(0,l.jsx)(i.nA,{children:w===a?(0,l.jsx)(u.p,{type:"text",value:A.formulaId,onChange:e=>S({...A,formulaId:e.target.value})}):(0,l.jsx)("span",{className:"font-medium",children:s.formulaId})}),(0,l.jsx)(i.nA,{children:w===a?(0,l.jsx)(u.p,{type:"text",value:A.productName,onChange:e=>S({...A,productName:e.target.value})}):s.productName}),(0,l.jsx)(i.nA,{children:w===a?(0,l.jsx)(u.p,{type:"number",step:"0.1",value:A.version,onChange:e=>S({...A,version:parseFloat(e.target.value)||1})}):s.version}),(0,l.jsx)(i.nA,{children:w===a?(0,l.jsx)(u.p,{type:"date",value:A.createdDate,onChange:e=>S({...A,createdDate:e.target.value})}):s.createdDate}),(0,l.jsx)(i.nA,{children:w===a?(0,l.jsxs)(C.l6,{value:A.status,onValueChange:e=>S({...A,status:e}),children:[(0,l.jsx)(C.bq,{children:(0,l.jsx)(C.yv,{})}),(0,l.jsx)(C.gC,{children:y.map(e=>(0,l.jsx)(C.eb,{value:e,children:e},e))})]}):(0,l.jsx)(c.E,{children:s.status})}),(0,l.jsx)(i.nA,{className:"text-right",children:(0,l.jsx)("div",{className:"flex justify-end gap-2",children:w===a?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(o.$,{size:"sm",variant:"default",onClick:()=>V(a),disabled:R||!K,children:[(0,l.jsx)(x.A,{className:"h-4 w-4"}),"Save"]}),(0,l.jsxs)(o.$,{size:"sm",variant:"outline",onClick:_,disabled:R,children:[(0,l.jsx)(j.A,{className:"h-4 w-4"}),"Cancel"]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(o.$,{size:"sm",variant:"outline",onClick:()=>{F(a),S(s),I(s)},disabled:R||null!==w,children:[(0,l.jsx)(v.A,{className:"h-4 w-4"}),"Edit"]}),(0,l.jsxs)(o.$,{size:"sm",variant:"destructive",onClick:()=>z(a,s.formulaId),disabled:R||null!==w,children:[(0,l.jsx)(p.A,{className:"h-4 w-4"}),"Delete"]})]})})})]},a)})})]})})]})]})})}},57883:(e,a,s)=>{Promise.resolve().then(s.bind(s,55295))}},e=>{e.O(0,[138,507,299,253,753,400,116,751,441,255,358],()=>e(e.s=57883)),_N_E=e.O()}]);