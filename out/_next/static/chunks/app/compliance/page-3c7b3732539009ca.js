(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[680],{2487:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var l=a(95155),i=a(12115),s=a(10708),n=a(94205),d=a(86948),r=a(87270),c=a(11647),o=a(3998),u=a(65142),x=a(22452),h=a(90109),j=a(73180),p=a(26615),m=a(88964),g=a(13630),v=a(15894),C=a(51834),A=a(76444),y=a(11186);let N=["Compliant","Pending","Non-Compliant"];function f(){let[e,t]=(0,i.useState)({}),[a,f]=(0,i.useState)(""),[b,w]=(0,i.useState)(null),[R,S]=(0,i.useState)({}),[T,I]=(0,i.useState)(null),[k,E]=(0,i.useState)(!1),[L,F]=(0,i.useState)(!1),[O,J]=(0,i.useState)({complianceId:"",regulationType:"",lastAudit:"",nextAudit:"",auditor:"",status:"Compliant"});(0,i.useEffect)(()=>{let e=(0,s.KR)(n.O,"compliance"),a=(0,s.Zy)(e,e=>{t(e.val()||{}),F(!1)},()=>F(!1));return()=>a()},[]);let $=async()=>{if(!O.complianceId||!O.regulationType||!O.lastAudit||!O.nextAudit||!O.auditor)return void(0,v.oR)({title:"Validation Error",description:"Please fill all required fields",variant:"destructive"});F(!0);try{let e=(0,s.KR)(n.O,"compliance"),t=(0,s.VC)(e);await (0,s.hZ)(t,{...O,id:t.key}),J({complianceId:"",regulationType:"",lastAudit:"",nextAudit:"",auditor:"",status:"Compliant"}),E(!1),(0,v.oR)({title:"Success",description:"Record added."})}catch(e){(0,v.oR)({title:"Error",description:"Failed to add compliance record.",variant:"destructive"})}finally{F(!1)}},_=async e=>{F(!0);try{let t=(0,s.KR)(n.O,"compliance/".concat(e));await (0,s.yo)(t,R),(0,v.oR)({title:"Success",description:"Record updated."}),w(null),S({}),I(null)}catch(e){(0,v.oR)({title:"Error",description:"Update failed.",variant:"destructive"})}finally{F(!1)}},z=()=>{w(null),S({}),I(null)},D=async(e,t)=>{if(confirm("Delete compliance record ".concat(t,"?"))){F(!0);try{let t=(0,s.KR)(n.O,"compliance/".concat(e));await (0,s.TF)(t),(0,v.oR)({title:"Success",description:"Record deleted."})}catch(e){(0,v.oR)({title:"Error",description:"Delete failed.",variant:"destructive"})}finally{F(!1)}}},K=!!T&&JSON.stringify(R)!==JSON.stringify(T),P=Object.entries(e).filter(e=>{var t,l,i,s;let[n,d]=e;return(null==(t=d.complianceId)?void 0:t.toLowerCase().includes(a.toLowerCase()))||(null==(l=d.regulationType)?void 0:l.toLowerCase().includes(a.toLowerCase()))||(null==(i=d.auditor)?void 0:i.toLowerCase().includes(a.toLowerCase()))||(null==(s=d.status)?void 0:s.toLowerCase().includes(a.toLowerCase()))});return(0,l.jsx)("div",{className:"p-6",children:(0,l.jsxs)(d.Zp,{children:[(0,l.jsx)(d.aR,{children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(d.ZB,{children:"Compliance Management"}),(0,l.jsx)(d.BT,{children:"Track and manage regulatory compliance records."})]}),(0,l.jsxs)(C.lG,{open:k,onOpenChange:E,children:[(0,l.jsx)(C.zM,{asChild:!0,children:(0,l.jsxs)(o.$,{className:"gap-2",children:[(0,l.jsx)(x.A,{className:"h-5 w-5"}),"New Record"]})}),(0,l.jsxs)(C.Cf,{children:[(0,l.jsxs)(C.c7,{children:[(0,l.jsx)(C.L3,{children:"Add Compliance Record"}),(0,l.jsx)(C.rr,{children:"Enter details to add a new record."})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(A.J,{htmlFor:"complianceId",children:"Compliance ID"}),(0,l.jsx)(u.p,{id:"complianceId",type:"text",value:O.complianceId,onChange:e=>J({...O,complianceId:e.target.value})}),(0,l.jsx)(A.J,{htmlFor:"regulationType",children:"Regulation Type"}),(0,l.jsx)(u.p,{id:"regulationType",type:"text",value:O.regulationType,onChange:e=>J({...O,regulationType:e.target.value})}),(0,l.jsx)(A.J,{htmlFor:"lastAudit",children:"Last Audit"}),(0,l.jsx)(u.p,{id:"lastAudit",type:"date",value:O.lastAudit,onChange:e=>J({...O,lastAudit:e.target.value})}),(0,l.jsx)(A.J,{htmlFor:"nextAudit",children:"Next Audit"}),(0,l.jsx)(u.p,{id:"nextAudit",type:"date",value:O.nextAudit,onChange:e=>J({...O,nextAudit:e.target.value})}),(0,l.jsx)(A.J,{htmlFor:"auditor",children:"Auditor"}),(0,l.jsx)(u.p,{id:"auditor",type:"text",value:O.auditor,onChange:e=>J({...O,auditor:e.target.value})}),(0,l.jsx)(A.J,{children:"Status"}),(0,l.jsxs)(y.l6,{value:O.status,onValueChange:e=>J({...O,status:e}),children:[(0,l.jsx)(y.bq,{children:(0,l.jsx)(y.yv,{})}),(0,l.jsx)(y.gC,{children:N.map(e=>(0,l.jsx)(y.eb,{value:e,children:e},e))})]})]}),(0,l.jsxs)(C.Es,{children:[(0,l.jsx)(o.$,{variant:"outline",onClick:()=>E(!1),disabled:L,children:"Cancel"}),(0,l.jsx)(o.$,{onClick:$,disabled:L,children:"Add Record"})]})]})]})]})}),(0,l.jsxs)(d.Wu,{children:[(0,l.jsxs)("div",{className:"relative mb-4",children:[(0,l.jsx)(h.A,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,l.jsx)(u.p,{placeholder:"Search records...",className:"pl-10",value:a,onChange:e=>f(e.target.value),disabled:L})]}),(0,l.jsx)("div",{className:"rounded-md border",children:(0,l.jsxs)(r.XI,{children:[(0,l.jsx)(r.A0,{children:(0,l.jsxs)(r.Hj,{children:[(0,l.jsx)(r.nd,{children:"Compliance ID"}),(0,l.jsx)(r.nd,{children:"Regulation Type"}),(0,l.jsx)(r.nd,{children:"Last Audit"}),(0,l.jsx)(r.nd,{children:"Next Audit"}),(0,l.jsx)(r.nd,{children:"Auditor"}),(0,l.jsx)(r.nd,{children:"Status"}),(0,l.jsx)(r.nd,{className:"text-right",children:"Actions"})]})}),(0,l.jsx)(r.BF,{children:0===P.length?(0,l.jsx)(r.Hj,{children:(0,l.jsx)(r.nA,{colSpan:7,className:"text-center h-32",children:'No records found. Click "New Record" to add.'})}):P.map(e=>{let[t,a]=e;return(0,l.jsxs)(r.Hj,{className:b===t?"bg-blue-50 dark:bg-blue-950/20":"",children:[(0,l.jsx)(r.nA,{children:b===t?(0,l.jsx)(u.p,{type:"text",value:R.complianceId,onChange:e=>S({...R,complianceId:e.target.value})}):(0,l.jsx)("span",{className:"font-medium",children:a.complianceId})}),(0,l.jsx)(r.nA,{children:b===t?(0,l.jsx)(u.p,{type:"text",value:R.regulationType,onChange:e=>S({...R,regulationType:e.target.value})}):a.regulationType}),(0,l.jsx)(r.nA,{children:b===t?(0,l.jsx)(u.p,{type:"date",value:R.lastAudit,onChange:e=>S({...R,lastAudit:e.target.value})}):a.lastAudit}),(0,l.jsx)(r.nA,{children:b===t?(0,l.jsx)(u.p,{type:"date",value:R.nextAudit,onChange:e=>S({...R,nextAudit:e.target.value})}):a.nextAudit}),(0,l.jsx)(r.nA,{children:b===t?(0,l.jsx)(u.p,{type:"text",value:R.auditor,onChange:e=>S({...R,auditor:e.target.value})}):a.auditor}),(0,l.jsx)(r.nA,{children:b===t?(0,l.jsxs)(y.l6,{value:R.status,onValueChange:e=>S({...R,status:e}),children:[(0,l.jsx)(y.bq,{children:(0,l.jsx)(y.yv,{})}),(0,l.jsx)(y.gC,{children:N.map(e=>(0,l.jsx)(y.eb,{value:e,children:e},e))})]}):(0,l.jsx)(c.E,{className:"Compliant"===a.status?"bg-green-600 text-white":"Pending"===a.status?"bg-blue-500 text-white":"bg-red-600 text-white",children:a.status})}),(0,l.jsx)(r.nA,{className:"text-right",children:(0,l.jsx)("div",{className:"flex justify-end gap-2",children:b===t?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(o.$,{size:"sm",variant:"default",onClick:()=>_(t),disabled:L||!K,children:[(0,l.jsx)(j.A,{className:"h-4 w-4"}),"Save"]}),(0,l.jsxs)(o.$,{size:"sm",variant:"outline",onClick:z,disabled:L,children:[(0,l.jsx)(p.A,{className:"h-4 w-4"}),"Cancel"]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(o.$,{size:"sm",variant:"outline",onClick:()=>{w(t),S(a),I(a)},disabled:L||null!==b,children:[(0,l.jsx)(m.A,{className:"h-4 w-4"}),"Edit"]}),(0,l.jsxs)(o.$,{size:"sm",variant:"destructive",onClick:()=>D(t,a.complianceId),disabled:L||null!==b,children:[(0,l.jsx)(g.A,{className:"h-4 w-4"}),"Delete"]})]})})})]},t)})})]})})]})]})})}},77115:(e,t,a)=>{Promise.resolve().then(a.bind(a,2487))}},e=>{e.O(0,[507,138,707,930,753,400,844,751,441,255,358],()=>e(e.s=77115)),_N_E=e.O()}]);